# $ARGUMENTS — Troubleshooting Playbook (v3.0)
---

## METADATA
---
title: "Troubleshooting Playbook"
app: "$ARGUMENTS"
template: "troubleshooting.playbook.template.md"
version: "3.0"
generated_by: "AppDoc Agent"
generated_at: "$DATE_GENERATED"
sources_scanned: $SOURCES_SCANNED
trigger_condition_summary: $TROUBLE_TRIGGER_SUMMARY
analysis_mode: "Static (Code + Documentation only)"
---

## 0 — Overview
This playbook is automatically generated by AppDoc Agent through static inspection of the codebase and existing documentation.  
It identifies potential failure modes, risk clusters, and likely root causes by examining patterns in exception handling, configuration logic, and architectural dependencies.

This artifact is **read-only**: humans consult it to understand system fragility or likely breakpoints.  
No manual edits are required.

---

## 1 — Quick Health Checklist (Static Heuristics)
Before running live diagnostics, AppDoc flags common risk indicators:

- [ ] Missing or partial error handling in critical functions  
- [ ] Configuration dependencies without defaults  
- [ ] Exception paths without logging or mitigation  
- [ ] External service calls lacking timeout/retry logic  
- [ ] High coupling between unrelated modules  
- [ ] Outdated documentation references or TODOs in code  

---

## 2 — Root-Cause Taxonomy (Static Classification)
AppDoc analyzes `try/except`, `throw`, and `log` patterns to group potential failure sources.

| Category | Detection Heuristic | Example Code Indicator | Confidence |
|-----------|--------------------|-------------------------|-------------|
| **Config Drift** | References to env vars or configs without defaults | `os.getenv("DB_URL")` | HIGH |
| **External Dependency** | API or DB calls without fallback | `requests.get(...)` without try/catch | MEDIUM |
| **Logic Regression** | Complex conditionals, commented bug notes | `if !condition` inside retry loop | HIGH |
| **Data Integrity** | Schema manipulation or unchecked parsing | `json.loads(data)` | MEDIUM |
| **Unhandled Exception** | Throw without corresponding catch | `throw new Exception(...)` | HIGH |
| **Other / Generic** | Unclassified exception or catch-all block | `except Exception:` | LOW |

> Each entry is inferred from static code inspection; confidence is assigned based on detection reliability.

---

## 3 — Diagnostics by System Layer
AppDoc classifies probable fault locations by file path and code context.

| Layer | Detection Scope | Typical Triggers | Notable Modules |
|--------|------------------|------------------|-----------------|
| **Network / API** | `/api/`, `/controllers/`, `/routes/` | Timeout, invalid response | $FILES_NETWORK |
| **Application / Logic** | `/services/`, `/core/`, `/domain/` | Null reference, logic regression | $FILES_APP |
| **Data / Persistence** | `/db/`, `/models/`, `/repository/` | Connection loss, schema mismatch | $FILES_DATA |
| **Configuration** | `/config/`, `.env`, YAML or JSON | Missing vars, type mismatch | $FILES_CONFIG |
| **Interface / UI** | `/ui/`, `/components/`, `/views/` | Input validation, rendering | $FILES_UI |

> Layer inference derived from directory naming, import dependencies, and keywords within code comments.

---

## 4 — Evidence & Confidence Summary
Each detected potential issue is supported by static evidence — file paths, line numbers, and code pattern classification.

| File | Line | Signature / Pattern | Inferred Issue | Confidence |
|------|------|---------------------|----------------|-------------|
<!-- Example evidence rows below; replace with actual findings during generation -->
| $EVIDENCE_ROW_1_FILE | $EVIDENCE_ROW_1_LINE | $EVIDENCE_ROW_1_PATTERN | $EVIDENCE_ROW_1_ISSUE | $EVIDENCE_ROW_1_CONFIDENCE |
| $EVIDENCE_ROW_2_FILE | $EVIDENCE_ROW_2_LINE | $EVIDENCE_ROW_2_PATTERN | $EVIDENCE_ROW_2_ISSUE | $EVIDENCE_ROW_2_CONFIDENCE |
| $EVIDENCE_ROW_3_FILE | $EVIDENCE_ROW_3_LINE | $EVIDENCE_ROW_3_PATTERN | $EVIDENCE_ROW_3_ISSUE | $EVIDENCE_ROW_3_CONFIDENCE |
| $EVIDENCE_ROW_4_FILE | $EVIDENCE_ROW_4_LINE | $EVIDENCE_ROW_4_PATTERN | $EVIDENCE_ROW_4_ISSUE | $EVIDENCE_ROW_4_CONFIDENCE |

Confidence levels:
- **HIGH:** Explicit exception or missing mitigation logic detected  
- **MEDIUM:** Probable failure inferred by pattern or naming  
- **LOW:** Weak or indirect indicators only  

---

## 5 — Static Severity Ranking
Severity is estimated from the *impact potential* of each pattern, rather than observed runtime frequency.

| Potential Issue | Severity | Evidence | Suggested Review Action |
|------------------|-----------|-----------|--------------------------|
| Missing error handling in payment flow | P0 – Critical | Multiple silent `catch` blocks | Review error propagation |
| Hardcoded credentials in config | P1 – Major | Detected secret-like pattern | Rotate credentials, externalize |
| Deprecated API usage | P2 – Moderate | Commented TODO in controller | Replace endpoint |
| Inconsistent schema versioning | P3 – Minor | Mismatch between migration files | Review migration script |

Severity scale:
- **P0:** May cause system failure  
- **P1:** Major user-facing or data risk  
- **P2:** Operational or maintainability concern  
- **P3:** Low impact or edge condition  

---

## 6 — Version & Diff Summary
Static diffs between documentation generations enable historical awareness of evolving risk.

| Version | Files Changed | New Potential Issues | Resolved Issues | Notes |
|----------|----------------|----------------------|-----------------|-------|
| v2.9 → v3.0 | 14 | 2 | 3 | Updated DB schema; removed deprecated API |
| v2.8 → v2.9 | 6 | 1 | 0 | New config validation introduced |

> Changes are derived by comparing hashes and modification timestamps between codebase snapshots.

---

## 7 — Summary of Findings
**System Risk Profile:**  
- High confidence potential failures: $COUNT_HIGH  
- Medium confidence potential failures: $COUNT_MED  
- Low confidence potential failures: $COUNT_LOW  

**Highest-Risk Layers:** $TOP_RISK_LAYER  
**Most Common Root-Cause Category:** $TOP_CAUSE_CATEGORY  

**Key Observations:**  
- [$INSIGHT_1]  
- [$INSIGHT_2]  
- [$INSIGHT_3]  

---

## 8 — Recommendations (Static)
- Add explicit logging and rethrow on all critical catch blocks  
- Introduce timeouts and retries for external calls  
- Centralize configuration defaults in one source of truth  
- Add validation tests for high-risk data transformations  
- Regularly regenerate this playbook to monitor new risk deltas  

---

## 9 — Appendices
- Codebase snapshot: `$SCAN_TIMESTAMP`  
- Total files scanned: `$FILES_SCANNED`  
- Total exceptions detected: `$EXCEPTIONS_FOUND`  
- Template version: `3.0`  
- Generator: `AppDoc Agent (Static Mode)`

---

*(End of Troubleshooting Playbook — Static Analysis Edition)*  
